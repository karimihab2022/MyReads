(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(32)},28:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(16),r=a.n(c),l=a(8),s=a(13),i="https://reactnd-books-api.udacity.com",u=localStorage.token;u||(u=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:u},h=function(e,t){return fetch("".concat(i,"/books/").concat(e.id),{method:"PUT",headers:Object(s.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},b=function(e){var t;return void 0===e.book.imageLinks||void 0===e.book.imageLinks.thumbnail?console.log("no image "):t=e.book.imageLinks.thumbnail,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:e.book.shelf,onChange:function(t){e.onchange(e.book,t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},e.book.title),o.a.createElement("div",{className:"book-authors"},e.book.authors))},d=function(e){return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},e.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},e.books.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(b,{book:t,onchange:e.onchange}))}))))},f=a(6),k=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],m=i[1],h=Object(n.useState)([]),b=Object(l.a)(h,2),k=b[0],E=b[1];return Object(n.useEffect)(function(){var t=e.books.filter(function(e){return"currentlyReading"===e.shelf});r(t);var a=e.books.filter(function(e){return"wantToRead"===e.shelf});m(a);var n=e.books.filter(function(e){return"read"===e.shelf});E(n)},[e.books]),o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(d,{books:c,name:"Currently Reading",onchange:e.onchange}),o.a.createElement(d,{books:u,name:"Want to Read",onchange:e.onchange}),o.a.createElement(d,{books:k,name:"Read",onchange:e.onchange}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(f.b,{to:"/search"},"Add a book")))},E=a(0),v=function(e){return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(f.b,{to:"/",className:"close-search",onClick:function(){e.close()}},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:function(t){e.onsearchchange(t.target.value)},type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},e.books.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(b,{book:t,onchange:e.onupdatebook}))}))))},g=(a(28),function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),u=Object(l.a)(r,2),b=u[0],d=u[1];Object(n.useEffect)(function(){fetch("".concat(i,"/books"),{headers:m}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(e){c(e)})},[]);return o.a.createElement("div",null,o.a.createElement(E.c,null,o.a.createElement(E.a,{exact:!0,path:"/"},o.a.createElement(k,{books:a,onchange:function(e,t){c(a.map(function(a){return a.id===e.id&&(a.shelf=t),a})),h(e,t)}})),o.a.createElement(E.a,{path:"/search"},o.a.createElement(v,{books:b,onsearchchange:function(e){var t;e?(t=e,fetch("".concat(i,"/search"),{method:"POST",headers:Object(s.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({query:t})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){e.length?(e=e.map(function(e){void 0===e.shelf&&(e.shelf="none");for(var t=0;t<a.length;t++)a[t].id===e.id&&(e.shelf=a[t].shelf);return e}),d(e)):d([])}):d([])},onupdatebook:function(e,t){e.shelf=t,c(a.filter(function(t){return e.id!==t.id}).concat([e])),d(b.filter(function(t){return e.id!==t.id}).concat([e])),h(e,t)},close:function(){d([])}}))))});a(30);r.a.render(o.a.createElement(f.a,null,o.a.createElement(g,null)),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.85b4fd12.chunk.js.map